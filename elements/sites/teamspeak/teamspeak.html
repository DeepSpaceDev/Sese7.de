<dom-module id="site-teamspeak">
	<template>
		<style>
			:host {
				display: block;
			}
			paper-material {
				display: block;
				margin: 15px auto;
				padding: 15px 40px 30px 40px;
				background-color: white;
				border-radius: 2px;
				vertical-align: center;
				max-width: 900px;
			}
			h2{
				margin-top: 10px;
				font-weight: 700;
			}
			.list{
				font-size: 18px;
			}
			.green{
				color: #0D47A1;
				font-weight: 700;
			}
		</style>
		<link href='https://fonts.googleapis.com/css?family=Roboto:700' rel='stylesheet' type='text/css'>
		<section>
			<paper-material>
				<h1>About us:</h1>
			</paper-material>

			<paper-material>			
				<h2 style="color: red;">Owner</h2>
				<div class="list" id="ts-owner"></div>

				<br />

				<h2 style="color: blue;">Dev</h2>
				<div class="list" id="ts-dev"></div>

				<br />

				<h2 style="color: orange;">Admin</h2>
				<div class="list" id="ts-admin"></div>

				<br />

				<h2 style="color: green;">Mod</h2>
				<div class="list" id="ts-mod"></div>

				<br /><br />

				<h2 style="color: grey;">Member</h2>
				<div class="list" id="ts-member"></div>

				<br /><br />
				<span style="font-size: 14px;" class="green">Online</span>
			</paper-material>
		</section>
	</template>
	<script>
		Polymer({
			is: 'site-teamspeak',

			attached: function(){
				$("#dialogcontent").html("Loading...");
				document.querySelector("#dialog").open();
				this.async(function(){
					var response = JSON.parse(ajax("scripts/sites/teamspeak.php", ""));
					var bull = " &bull; ";

					var owner = "";
					var member = "";
					var admin = "";
					var mod = "";
					var dev = "";

					sortByKey(response, 'name');
					l(response);
					for(var i = 0; i < response.length; i++){
						var grids = [];
						var gridsu = "";
						for(var x = 0; x < response[i]['groups'].length; x++){
							grids[x] = response[i]['groups'][x]['sgid'];
							gridsu += response[i]['groups'][x]['sgid'] + "-";
						}
						if($.inArray("6", grids) != -1){
							owner += "<ts-user user-online='" + ((response[i]['online']) ? "online" : "offline") + "' user-groups='" + gridsu + "'>" + response[i]['name'] + "</ts-user>" + bull;
						}
						else if($.inArray("14", grids) != -1){
							dev += "<ts-user user-online='" + ((response[i]['online']) ? "online" : "offline") + "' user-groups='" + gridsu + "'>" + response[i]['name'] + "</ts-user>" + bull;
						}
						else if($.inArray("29", grids) != -1 || $.inArray("30", grids) != -1 ){
							admin += "<ts-user user-online='" + ((response[i]['online']) ? "online" : "offline") + "' user-groups='" + gridsu + "'>" + response[i]['name'] + "</ts-user>" + bull;
						}
						else if($.inArray("16", grids) != -1){
							mod += "<ts-user user-online='" + ((response[i]['online']) ? "online" : "offline") + "' user-groups='" + gridsu + "'>" + response[i]['name'] + "</ts-user>" + bull;
						}
						else{
							member += "<ts-user user-online='" + ((response[i]['online']) ? "online" : "offline") + "' user-groups='" + gridsu + "'>" + response[i]['name'] + "</ts-user>" + bull;
						}
						qs("#ts-owner").innerHTML = owner;
						qs("#ts-dev").innerHTML = dev;
						qs("#ts-admin").innerHTML = admin;
						qs("#ts-mod").innerHTML = mod;
						qs("#ts-member").innerHTML = member;

					}
					document.querySelector("#dialog").close();
					toast("Hover over members ;)", 5000);
				}, 100);
			}
		});
	</script>
</dom-module>